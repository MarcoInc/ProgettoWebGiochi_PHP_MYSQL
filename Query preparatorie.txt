-creiamo il database:

create database giochi;

-Usiamo il database creato
use giochi;

-creiamo le tabelle:

CREATE TABLE utenti (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL,
    password VARCHAR(100) NOT NULL,
    isCuratore BOOLEAN DEFAULT FALSE,
    isAdmin BOOLEAN DEFAULT FALSE,
    level INT DEFAULT 1
);

CREATE TABLE giochi (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome_gioco VARCHAR(255) NOT NULL,
    data_acquisto DATE NOT NULL,
    id_donatore INT,
    isPrestato BOOLEAN DEFAULT FALSE
);

CREATE TABLE abbonamenti (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_utente INT NOT NULL,
    data_inizio_abbonamento DATE NOT NULL,
    data_fine_abbonamento DATE NOT NULL,
    stato ENUM('Donatore', 'Regolare', 'Non regolare') NOT NULL,
    FOREIGN KEY (id_utente) REFERENCES utenti(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE prestiti (
    id INT AUTO_INCREMENT PRIMARY KEY,
    id_utente INT NOT NULL,
    id_gioco int NOT NULL,
    data_prestito DATE NOT NULL,
    data_scadenza_prestito DATE NOT NULL,
    FOREIGN KEY (id_utente) REFERENCES utenti(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

-Popoliamo le tabelle con alcune righe:

admin -> password
pippo -> 123456
saro -> qwerty

INSERT INTO utenti (username, password,isCuratore,isAdmin) 
VALUES 
    ('admin','5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8',TRUE,TRUE), 
    ('pippo','8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92',FALSE,FALSE),
    ('saro','65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5',FALSE,FALSE);
    

INSERT INTO giochi (nome_gioco, data_acquisto, id_donatore) 
VALUES 
    ('RISIKO!', '2023-12-15', NULL),
    ('Monopoly', '2024-01-20', 2),
    ('UNO', '2023-11-09', NULL);